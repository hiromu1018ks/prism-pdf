# **個人用PDF統合管理アプリ 要件定義書**

## **1\. プロジェクト概要**

* **目的:** 個人のローカル環境で、PDFファイルの結合・分割・圧縮・並べ替えを効率的に行う。  
* **運用形態:** ローカル開発サーバー（例: npm run dev）上での運用。およびPWAとしてのインストール利用。  
* **コンセプト:** 「**Secure, Fast, & Beautiful**」。外部サーバーへファイルを送信せず、ブラウザ（Client-side）で完結させることでセキュリティと速度を担保しつつ、市販のSaaSのようなリッチな操作感を提供する。

## **2\. 機能要件 (Functional Requirements)**

### **2.1. PDF結合 (Merge)**

* 複数のPDFファイルをアップロードできる。  
* 結合順序をドラッグ＆ドロップで自由に変更できる。  
* 結合後のファイルをダウンロードできる。

### **2.2. PDF分割 (Split)**

* 1つのPDFファイルをページごとに分割できる。  
* 特定のページ範囲を指定して抽出できる（例: 1-3ページ、5ページ目のみ）。  
* 分割したファイルを個別に、またはZIPとしてまとめてダウンロードできる。

### **2.3. PDF並べ替え (Reorder/Organize)**

* PDF内の全ページをグリッド表示（サムネイル）する。  
* ページ単位でドラッグ＆ドロップによる順序変更ができる。  
* 特定のページを削除できる。  
* 特定のページを回転（90度単位）できる。

### **2.4. PDF圧縮 (Compress)**

* 画像の再サンプリングや不要なメタデータの削除によりファイルサイズを削減する。  
* *注記:* クライアントサイド処理のため、画質劣化を伴う強力な圧縮よりは「最適化」に近い処理を想定（WebAssemblyまたはJSライブラリを使用）。

### **2.5. 高度な編集機能（推奨追加機能）**

* **メタデータ編集:** タイトル、サブタイトル、作成者、キーワードなどのプロパティ情報を閲覧・編集できる。  
* **セキュリティ管理:**  
  * PDFへのパスワード設定（暗号化）。  
  * 既知のパスワードによるPDFの保護解除（復号化して保存）。  
* **注釈・スタンプ:**  
  * 全ページまたは指定ページに通し番号（ページネーション）を挿入できる。  
  * 「Confidential」「Draft」などのテキスト透かし（ウォーターマーク）を挿入できる。  
* **アセット抽出:**  
  * PDF内に埋め込まれている画像を検出し、個別の画像ファイルとして抽出・ダウンロードできる。

### **2.6. 共通機能**

* **ファイル取り込み:** ドラッグ＆ドロップ、またはファイル選択ダイアログ。  
* **プレビュー:** 作業中のPDFをリアルタイムでプレビュー表示。  
* **履歴管理:** 直近の操作をUndo/Redoできる。  
* **設定保存:** ダークモード設定や、よく使う出力設定をローカルストレージに保存。

## **3\. UI/UX要件 (Modern & Rich Design)**

### **3.1. デザインコンセプト**

* **Glassmorphism & Neomorphism:** すりガラスのような透過効果や、柔らかい影を使用した現代的なデザイン。  
* **Dark Mode対応:** システム設定または手動切り替えによるダークモード対応。目に優しい配色。  
* **Fluid Animations:** ページ遷移、ファイルのドロップ、リストの並べ替え時に滑らかなアニメーション（Framer Motion等を想定）を入れる。

### **3.2. インタラクション**

* **Drag & Drop First:** ファイルの追加だけでなく、ページの並べ替えも直感的なD\&Dで行えること。  
* **Keyboard Shortcuts:** 効率化のため、削除（Del）、回転（R）、保存（Cmd/Ctrl+S）などのショートカットキーに対応する。  
* **Instant Feedback:** 処理中（Loading）、完了（Success）、エラー（Error）をトースト通知やプログレスバーで視覚的にわかりやすく伝える。  
* **レスポンシブ:** PCブラウザでの利用が主だが、タブレット幅でもレイアウトが崩れないこと。

## **4\. 技術スタック案 (Technical Stack)**

ローカル運用かつモダンUIを実現するための推奨構成です。

* **Frontend Framework:** React (Vite)  
  * 高速な動作とリッチなUIコンポーネント管理のため。  
* **Styling:** Tailwind CSS  
  * 柔軟なデザインとダークモード実装のため。  
* **PDF Processing:** pdf-lib (JavaScript)  
  * クライアントサイド（ブラウザ内）でPDFの結合・分割・回転・メタデータ編集を行うための強力なライブラリ。  
* **Helper Libraries:**  
  * jszip: 複数ファイルのダウンロード用。  
  * react-dropzone: ファイルアップロードUI用。  
* **UI Libraries:**  
  * framer-motion: アニメーション用。  
  * dnd-kit または react-beautiful-dnd: ドラッグ＆ドロップ用。  
  * lucide-react: 美しいアイコンセット。  
  * sonner: 美しくカスタマイズ可能なトースト通知。  
* **PWA Support:** vite-plugin-pwa  
  * デスクトップアプリとしてインストール可能にするため。

## **5\. 非機能要件**

* **セキュリティ:** アップロードされたファイルはブラウザのメモリ内でのみ処理し、外部ネットワークには一切送信しない。  
* **パフォーマンス:** 100ページ程度のPDFであれば、操作にラグを感じさせないこと。Web Workerを使用してメインスレッドのブロックを防ぐ。